<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Debugging Session and Execution Model"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Debugging Session and Execution Model</title>

<meta name="MS-HAID" content="Engine_Overview_87d6e561-6d31-4a9e-8be3-1b5b93ebb5a3.xml"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.debugging_session_and_execution_model"></a>Debugging Session and Execution Model</h1>
</div>
<p>The debugger engine can debug multiple targets, simultaneously.  A <i>debugging session</i> begins when the engine acquires a target and continues until all of the targets have been discarded.  A debugging session is <i>inaccessible</i> while the targets are executing and <i>accessible</i> when the current target is suspended.  The engine can only be used to examine and manipulate targets while the session is accessible.</p>
<p>The main loop of a debugger typically consists of setting the execution status, calling the method <a href="waitforevent.htm"><b>WaitForEvent</b></a> and handling the generated <a href="events.htm#events">events</a>.  When <b>WaitForEvent</b> is called, the session becomes inaccessible.</p>
<p>When an event occurs in a target, the engine suspends all targets and the session becomes accessible.  The engine then notifies the event callbacks of the event and follows the event filter rules.  The event callbacks and event filters determine how execution in the target should proceed.  If they determine that the engine should break into the debugger, the <b>WaitForEvent</b> method returns and the session remains accessible; otherwise, the engine will resume execution of the target in the manner determined by the event callbacks and event filters, and the session becomes inaccessible again.</p>
<p>For the duration of the <b>WaitForEvent</b> call--in particular, while notifying the event callbacks and processing the filter rules--the engine is in a state referred to as "inside a wait".  While in this state, <b>WaitForEvent</b> cannot be called (it is not reentrant).</p>
<p>There are two steps involved in initiating execution in a target: setting the execution status, and then calling <b>WaitForEvent</b>.  The execution status can be set using the method <a href="setexecutionstatus.htm"><b>SetExecutionStatus</b></a> or by executing a debugger command that sets the execution status--for example, <b>g(Go)</b> and <b>p (Step)</b>.</p>
<p>If a sequence of debugger commands are executed together--for example, "<b>g ; ? @$ip</b>"--an <i>implicit wait</i> will occur after any command that requires execution in the target if that command is not the last command in the sequence.  An implicit wait cannot occur when the debugger engine is in the state "inside a wait"; in this case, the execution of the commands will stop and the current command--the one that attempted to cause the implicit wait--will be interpreted as an indication of how execution in the target should proceed.  The rest of the commands will be discarded.</p>
<div class="alert"><b>Note</b>    When determining whether the session is accessible or inaccessible, limited execution of a target (for example, stepping) is considered execution by the engine.  When the limited execution is complete, the session becomes accessible.</div>
<div> </div>
<h3><a id="host_engine"></a><a id="HOST_ENGINE"></a>Host Engine</h3>
<p>When debugging remotely, you can use multiple instances of the debugger engine.  Exactly one of these instances maintains the debugging session; this instance is called the <i>host engine</i>.</p>
<p>All debugger operations are relative to the host engine, for example, symbol loading and extension loading.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20Debugging Session and Execution Model%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
