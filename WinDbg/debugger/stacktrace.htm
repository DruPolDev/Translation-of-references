<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="The StackTrace function retrieves a stack trace for the process being debugged. Returns the number of frames read into the buffer pointed to by StackFrames."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>StackTrace function</title>

<meta name="MS-HAID" content="WdbgExts_Ref_5ccc4adf-2b59-4373-8e4a-3bc8847c5749.xml"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.stacktrace"></a>StackTrace function</h1>
</div>
<p>The <b>StackTrace</b> function retrieves a stack trace for the process being debugged. Returns the number of frames read into the buffer pointed to by <i>StackFrames</i>.</p>
<h2>Syntax</h2>
<div class="code"><span codelanguage="ManagedCPlusPlus"><table>
<tr>
<th>C++</th>
</tr>
<tr>
<td>
<pre>ULONG  StackTrace(
  _In_  ULONG          FramePointer,
  _In_  ULONG          StackPointer,
  _In_  ULONG          ProgramCounter,
  _Out_ PEXTSTACKTRACE StackFrames,
  _In_  ULONG          Frames
);</pre>
</td>
</tr>
</table></span></div>
<h2>Parameters</h2>
<dl>
<dt><i>FramePointer</i> [in]</dt>
<dd>
<p>Specifies the frame pointer. If no specific value is desired, this should simply be set to zero.</p>
</dd>
<dt><i>StackPointer</i> [in]</dt>
<dd>
<p>Specifies the stack pointer. If no specific value is desired, this should simply be set to zero.</p>
</dd>
<dt><i>ProgramCounter</i> [in]</dt>
<dd>
<p>Specifies the instruction pointer. If no specific value is desired, this should simply be set to zero.</p>
</dd>
<dt><i>StackFrames</i> [out]</dt>
<dd>
<p>Receives the stack information. <i>StackFrames</i> must be a pointer to a buffer that is large enough to hold the number of stack frames specified by <i>Frames</i>. The stack frames are stored in the following data structure:</p>
<pre class="syntax" xml:space="preserve"><code>typedef struct _tagEXTSTACKTRACE {
    ULONG       FramePointer;
    ULONG       ProgramCounter;
    ULONG       ReturnAddress;
    ULONG       Args[4];
} EXTSTACKTRACE, *PEXTSTACKTRACE;</code></pre>
</dd>
<dt><i>Frames</i> [in]</dt>
<dd>
<p>Specifies the maximum number of frames that will fit into the buffer.</p>
</dd>
</dl>
<h2>Return value</h2>
<p>The actual number of frames written to the buffer pointed to by <i>StackFrames</i>.</p>
<h2>Remarks</h2>
<p>For a WdbgExts extension, include Wdbgexts.h. For 

a DbgEng extension, include Wdbgexts.h before 

Dbgeng.h. See <a href="writing_dbgeng_extension_code.htm">Writing DbgEng Extension Code</a> for 

details.</p>
<h2>Requirements</h2>
<table>
<tr>
<th width="30%">
<p>Target platform</p>
</th>
<td width="70%">
<dl>
<dt></dt>
</dl>
</td>
</tr>
<tr>
<th width="30%">
<p>Header</p>
</th>
<td width="70%">
<dl>
<dt>Wdbgexts.h (include Wdbgexts.h or Dbgeng.h)</dt>
</dl>
</td>
</tr>
</table>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20StackTrace function%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
