<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="You can use WinDbg to attach to a running process or to spawn and attach to a new process."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Debugging a User-Mode Process Using WinDbg</title>



<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.debugging_a_user-mode_process_using_windbg"></a>Debugging a User-Mode Process Using WinDbg</h1>
</div>
<p>You can use WinDbg to attach to a running process or to spawn and attach to a new process.</p>
<h2><a id="Attaching_to_a_Running_Process"></a><a id="attaching_to_a_running_process"></a><a id="ATTACHING_TO_A_RUNNING_PROCESS"></a>Attaching to a Running Process</h2>
<p>There are several ways you can use WinDbg to attach to a running process. Regardless of the method you choose, you will need the process ID or the process name. The process ID is a number assigned by the operating system. For more information about how to determine the process ID and the process name, see <a href="finding_the_process_id.htm">Finding the Process ID</a>.</p>
<p></p>
<h3><a id="WinDbg_Menu"></a><a id="windbg_menu"></a><a id="WINDBG_MENU"></a>WinDbg Menu</h3>
<p>When WinDbg is in dormant mode, you can attach to a running process by choosing <b>Attach to a Process</b> from the <b>File</b> menu or by pressing <b>F6</b>.</p>
<p>In the <b>Attach to Process</b> dialog box, select the process you want to debug, and click <b>OK</b>.</p>
<h3><a id="command_prompt1"></a><a id="COMMAND_PROMPT1"></a>Command Prompt</h3>
<p>In a Command Prompt window, you can attach to a running process when you launch WinDbg. Use one of the following commands:</p>
<ul>
<li><b>windbg -p </b><i>ProcessID</i></li>
<li><b>windbg -pn </b><i>ProcessName</i></li>
</ul>
<p>where <i>ProcessID</i> is the Process ID of a running process or <i>ProcessName</i> is the name of a running process.</p>
<p>For more information about the command-line syntax, see <a href="windbg_command_line_options.htm"><b>WinDbg Command-Line Options</b></a>.</p>
<h3><a id="debugger_command_window1"></a><a id="DEBUGGER_COMMAND_WINDOW1"></a>Debugger Command Window</h3>
<p>If WinDbg is already debugging one or more processes, you can attach to a running process by using the <a href="_attach__attach_to_process_.htm"><b>.attach (Attach to Process)</b></a> command in the <a href="the_debugger_command_window.htm">Debugger Command window</a>.</p>
<p>The debugger always starts multiple target processes simultaneously, unless some of their threads are frozen or suspended. </p>
<p>If the <a href="_attach__attach_to_process_.htm"><b>.attach</b></a> command is successful, the debugger attaches to the specified process the next time the debugger issues an execution command. If you use this command several times in a row, execution has to be requested by the debugger as many times as you use this command.</p>
<h2><a id="Attaching_to_a_Running_Process_Noninvasively"></a><a id="attaching_to_a_running_process_noninvasively"></a><a id="ATTACHING_TO_A_RUNNING_PROCESS_NONINVASIVELY"></a>Attaching to a Running Process Noninvasively</h2>
<p>If you want to debug a running process and interfere only minimally in its execution, you should debug the process <a href="noninvasive_debugging__user_mode_.htm">noninvasively</a>.</p>
<h3><a id="windbg_menu1"></a><a id="WINDBG_MENU1"></a>WinDbg Menu</h3>
<p>When WinDbg is in dormant mode, you can noninvasively debug a running process by choosing <b>Attach to a Process</b> from the <b>File </b>menu or by pressing <b>F6</b>.</p>
<p>When the <b>Attach to Process</b> dialog box appears, select the <b>Noninvasive</b> check box. Then, select the line that contains the process ID and name that you want. (You can also enter the process ID in the <b>Process ID</b> box.) Finally, click <b>OK</b>.</p>
<h3><a id="command_prompt2"></a><a id="COMMAND_PROMPT2"></a>Command Prompt</h3>
<p>In a Command Prompt window, you can attach to a running process noninvasively when you launch WinDbg. Use one of the following commands:</p>
<dl>
<dd><b>windbg -pv -p </b><i>ProcessID</i></dd>
<dd><b>windbg -pv -pn </b><i>ProcessName</i></dd>
</dl>
<p>There are several other useful command-line options. For more information about the command-line syntax, see <a href="windbg_command_line_options.htm"><b>WinDbg Command-Line Options</b></a>.</p>
<h3><a id="debugger_command_window2"></a><a id="DEBUGGER_COMMAND_WINDOW2"></a>Debugger Command Window</h3>
<p>If the debugger is already active, you can noninvasively debug a running process by using the <a href="_attach__attach_to_process_.htm"><b>.attach -v (Attach to Process)</b></a> command in the <a href="the_debugger_command_window.htm">Debugger Command window</a>.</p>
<p>You can use the <b>.attach</b> command if the debugger is already debugging one or more processes invasively. You cannot use this command if WinDbg is dormant.</p>
<p>If the <b>.attach -v</b> command is successful, the debugger debugs the specified process the next time that the debugger issues an execution command. Because execution is not permitted during noninvasive debugging, the debugger cannot noninvasively debug more than one process at a time. This restriction also means that using the <b>.attach -v</b> command might make an existing invasive debugging session less useful.</p>
<h2><a id="Spawning_a_New_Process"></a><a id="spawning_a_new_process"></a><a id="SPAWNING_A_NEW_PROCESS"></a>Spawning a New Process</h2>
<p>WinDbg can start a user-mode application and then debug the application. The application is specified by name. The debugger can also automatically attach to child processes (additional processes that the original target process started).</p>
<p>Processes that the debugger creates (also known as spawned processes) behave slightly differently than processes that the debugger does not create.</p>
<p>Instead of using the standard heap API, processes that the debugger creates use a special debug heap. You can force a spawned process to use the standard heap instead of the debug heap by using the _NO_DEBUG_HEAP <a href="general_environment_variables.htm">environment variable</a> or the <b>-hd</b> command-line option.</p>
<p>Also, because the target application is a child process of the debugger, it inherits the debugger's permissions. This permission might enable the target application to perform certain actions that it could not perform otherwise. For example, the target application might be able to affect protected processes.</p>
<h3><a id="windb_menu2"></a><a id="WINDB_MENU2"></a>WinDbg Menu</h3>
<p>When WinDbg is in dormant mode, you can spawn a new process by choosing <b>Open Executable</b> from the <b>File</b> menu or by pressing CTRL+E.</p>
<p>When the Open Executable dialog box appears, enter the full path of the executable file in the<b> File name</b> box, or use the <b>Look in</b> list to select the path and file name that you want.</p>
<p>If you want to use any command-line parameters with the user-mode application, enter them in the <b>Arguments</b> box. If you want to change the starting directory from the default directory, enter the directory path in the <b>Start</b> directory box. If you want WinDbg to attach to child processes, select the <b>Debug child processes also</b> check box.  </p>
<p>After you make your selections, click <b>Open</b>.</p>
<h3><a id="Command_Prompt"></a><a id="command_prompt"></a><a id="COMMAND_PROMPT"></a>Command Prompt</h3>
<p>In a Command Prompt window, you can spawn a new process when you launch WinDbg. Use the following command:</p>
<p><b>windbg [-o] </b><i>ProgramName</i><b> [</b><i>Arguments</i><b>]</b></p>
<p>The <b>-o</b> option causes the debugger to attach to child processes. There are several other useful command-line options. For more information about the command-line syntax, see <a href="windbg_command_line_options.htm"><b>WinDbg Command-Line Options</b></a>.</p>
<h3><a id="debugger_command_window3"></a><a id="DEBUGGER_COMMAND_WINDOW3"></a>Debugger Command Window</h3>
<p>If WinDbg is already debugging one or more processes, you can create a new process by using the <a href="_create__create_process_.htm"><b>.create (Create Process)</b></a> command in the <a href="the_debugger_command_window.htm">Debugger Command window</a>.</p>
<p>The debugger will always start multiple target processes simultaneously, unless some of their threads are frozen or suspended. </p>
<p>If the <a href="_create__create_process_.htm"><b>.create</b></a> command is successful, the debugger creates the specified process the next time that the debugger issues an execution command. If you use this command several times in a row, execution has to be requested by the debugger as many times as you use this command.</p>
<p>You can control the application's starting directory by using the <a href="_createdir__set_created_process_directory_.htm"><b>.createdir (Set Created Process Directory)</b></a> command before <a href="_create__create_process_.htm"><b>.create</b></a>. You can use the <b>.createdir -I</b> command or the <b>-noinh</b> command-line option to control whether the target application inherits the debugger's handles.</p>
<p>You can activate or deactivate the debugging of child processes by using the <a href="_childdbg__debug_child_processes_.htm"><b>.childdbg (Debug Child Processes)</b></a> command.</p>
<h2><a id="Reattaching_to_a_Process"></a><a id="reattaching_to_a_process"></a><a id="REATTACHING_TO_A_PROCESS"></a>Reattaching to a Process</h2>
<p>If the debugger stops responding or freezes, you can attach a new debugger to the target process. For more information about how to attach a debugger in this situation, see <a href="reattaching_to_the_target_application.htm">Reattaching to the Target Application</a>.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20Debugging a User-Mode Process Using WinDbg%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
