<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="WdbgExts Threads and Processes"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>WdbgExts Threads and Processes</title>

<meta name="MS-HAID" content="WdbgExts_DG_bee66511-f295-4861-8362-4a07f8a4a457.xml"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.wdbgexts_threads_and_processes"></a>WdbgExts Threads and Processes</h1>
</div>
<p>This topic provides a brief overview of how threads and processes can be manipulated using the WdbgExts API.  For an overview of threads and processes in the <a href="introduction.htm#debugger_engine">debugger engine</a>, see <a href="threads_and_processes.htm">Threads and Processes</a> in the <a href="debugger_engine_overview.htm">Debugger Engine Overview</a> section of this documentation.</p>
<h3><a id="threads"></a><a id="THREADS"></a>Threads</h3>
<p>To get the address of the thread environment block (TEB) that describes the current thread, use the method <a href="gettebaddress.htm"><b>GetTebAddress</b></a>.  In kernel-mode debugging, the KTHREAD structure is also available to describe a thread. This structure is returned by <a href="getcurrentthreadaddr.htm"><b>GetCurrentThreadAddr</b></a> (in user-mode debugging, <b>GetCurrentThreadAddr</b> returns the address of the TEB).</p>
<p>The <a href="scopes_and_symbol_groups.htm#thread_context">thread context</a> is the state preserved by Windows when switching threads; it is represented by the CONTEXT structure.  This structure varies with the operating system and platform and care should be taken when using the CONTEXT structure.  The thread context is returned by the <a href="getcontext.htm"><b>GetContext</b></a> function and can be set using the <a href="setcontext.htm"><b>SetContext</b></a> function.</p>
<p>To examine the stack trace for the current thread, use the <a href="stacktrace.htm"><b>StackTrace</b></a> function.  To temporarily change the thread used for examining the stack trace, use the <a href="setthreadforoperation.htm"><b>SetThreadForOperation</b></a> or <a href="setthreadforoperation64.htm"><b>SetThreadForOperation64</b></a> functions.  See <a href="examining_the_stack_trace.htm">Examining the Stack Trace</a> in the <a href="using_the_debugger_engine_api.htm">Using the Debugger Engine API</a> section of this documentation for additional methods for examining the stack.</p>
<p>To get information about an operating system thread in the target, use the <a href="ioctl.htm"><b>Ioctl</b></a> operation <a href="ig_get_thread_os_info.htm"><b>IG_GET_THREAD_OS_INFO</b></a>.</p>
<h3><a id="processes"></a><a id="PROCESSES"></a>Processes</h3>
<p>To get the address of the process environment block (PEB) that describes the current process use the method <a href="getpebaddress.htm"><b>GetPebAddress</b></a>.  In kernel-mode debugging, the KPROCESS structure is also available to describe a process. This structure is returned by <a href="getcurrentprocessaddr.htm"><b>GetCurrentProcessAddr</b></a> (in user-mode debugging, <b>GetCurrentProcessAddr</b> returns the address of the PEB).</p>
<p>The method <a href="getcurrentprocesshandle.htm"><b>GetCurrentProcessHandle</b></a> returns the system handle for the current process.</p>
<h3><a id="additional_information"></a><a id="ADDITIONAL_INFORMATION"></a>Additional Information</h3>
<p>For a more powerful thread manipulation and process manipulation API, see <a href="controlling_threads_and_processes.htm">Controlling Threads and Processes</a> in the <a href="using_the_debugger_engine_api.htm">Using the Debugger Engine API</a> section of this documentation.</p>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20WdbgExts Threads and Processes%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
