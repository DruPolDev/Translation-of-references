<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="The !usbkd.usbhcdpnp command displays the Plug and Play (PnP) state history for a USB host controller or root hub."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>!usbkd.usbhcdpnp</title>

<meta name="MS-HAID" content="debugger._usbhcdpnp"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger._usbkd_usbhcdpnp"></a>!usbkd.usbhcdpnp</h1>
</div>
<p>The  <b>!usbkd.usbhcdpnp</b> command displays the Plug and Play (PnP) state history for a USB host controller or root hub.</p>
<pre class="syntax"><b>!usbkd.usbhcdpnp </b><i>DeviceExtension</i></pre>
<h2><a id="ddk__devobj_dbg"></a><a id="DDK__DEVOBJ_DBG"></a>Parameters</h2>
<p></p>
<dl>
<dt><a id="_______DeviceExtension______"></a><a id="_______deviceextension______"></a><a id="_______DEVICEEXTENSION______"></a>       <i>DeviceExtension</i>      </dt>
<dd>
<p>Address of one of the following:</p>
<ul>
<li>The device extension for the functional device object (FDO) of a USB host controller.</li>
<li>The device extension for the physical device object (PDO) a USB root hub.</li>
</ul>
</dd>
</dl>
<h2><a id="DLL"></a><a id="dll"></a>DLL</h2>
<p>Usbkd.dll
     </p>
<h2>Examples</h2>
<p>Here is one way to find the address of the device extension for the FDO of USB host controller. First enter <a href="_usbkd_usb2tree.htm"><b>!usbkd.usb2tree</b></a>.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usb2tree

UHCI MINIPORT(s) dt usbport!_USBPORT_MINIPORT_DRIVER ffffe0000090c3d0
...
4)!uhci_info ffffe00001c8f1a0 !devobj ffffe00001c8f050 PCI: VendorId 8086 DeviceId 2938 RevisionId 0002 
...</code></pre>
<p>In the preceding output, the address of the device extension of the FDO is displayed as the argument of the <a href="debugger_markup_language_commands.htm">DML</a> command <b>!uhci_info ffffe00001c8f1a0</b>.</p>
<p>Now pass the address of the device extension to the <b>!usbhcdpnp</b> command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usbhcdpnp ffffe00001c8f1a0

PNP STATE LOG (latest at bottom)
--------------------------------------------------------------------------------
     EVENT                         STATE               NEXT
--------------------------------------------------------------------------------
[01] EvFDO_IRP_MN_START_DEVICE      PnpNotStarted       PnpStarted          
[02] EvFDO_IRP_MN_QBR_RH            PnpStarted          PnpStarted</code></pre>
<p>Here is one way to find the address of the device extension for the PDO of a root hub. First enter <a href="_usbkd_usb2tree.htm"><b>!usbkd.usb2tree</b></a>.</p>
<pre class="syntax" xml:space="preserve"><code>4)!uhci_info ffffe00001c8f1a0 !devobj ffffe00001c8f050 PCI: VendorId 8086 DeviceId 2938 RevisionId 0002 
    RootHub !hub2_info ffffe00000d941a0 !devstack ffffe00000d94050</code></pre>
<p>In the preceding output, you can see the address of the FDO of the root hub displayed as the argument to the command <b>!devstack ffffe00000d94050</b>. Use the <a href="_devstack.htm"><b>!devstack</b></a> command to find the address of the PDO and the PDO device extension.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !kdexts.devstack ffffe00000d94050
  !DevObj           !DrvObj            !DevExt           ObjectName
&gt; ffffe00000d94050  \Driver\usbhub     ffffe00000d941a0  0000006b
  ffffe00000ed4050  \Driver\usbuhci    ffffe00000ed41a0  USBPDO-2</code></pre>
<p>In the preceding output, you can see that the address of the device extension for the PDO of the root hub is <code>ffffe00000ed41a0</code>.</p>
<p>Now pass the address of the device extension to the  <b>!usbhcdpnp</b> command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usbhcdpnp ffffe00000ed41a0

PNP STATE LOG (latest at bottom)
--------------------------------------------------------------------------------
     EVENT                         STATE               NEXT
--------------------------------------------------------------------------------
[01] EvPDO_IRP_MN_START_DEVICE      PnpNotStarted       PnpStarted          </code></pre>
<h2><a id="see_also"></a>See also</h2>
<dl>
<dt><a href="usb_2_0_extensions.htm">USB 2.0 Debugger Extensions</a></dt>
<dt><a href="http://go.microsoft.com/fwlink/p?LinkID=227351">Universal Serial Bus (USB) Drivers</a></dt>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20!usbkd.usbhcdpnp%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
