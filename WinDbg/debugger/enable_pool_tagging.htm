<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="Enable pool tagging"/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>Enable pool tagging</title>

<meta name="MS-HAID" content="GFlags_c858b070-5a5e-4afc-9cfa-f933c81c8793.xml"/>


<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.enable_pool_tagging"></a>Enable pool tagging</h1>
</div>
<h2><a id="ddk_enable_pool_tagging_dtools"></a><a id="DDK_ENABLE_POOL_TAGGING_DTOOLS"></a></h2>
<p>The <b>Enable pool tagging</b> flag collects data and calculates statistics about pool memory allocations sorted by pool tag value.</p>
<table>
<tr>
<td>
<p><b>Abbreviation</b></p>
</td>
<td>
<p>ptg</p>
</td>
</tr>
<tr>
<td>
<p><b>Hexadecimal value</b></p>
</td>
<td>
<p>0x400</p>
</td>
</tr>
<tr>
<td>
<p><b>Symbolic Name</b></p>
</td>
<td>
<p>FLG_POOL_ENABLE_TAGGING</p>
</td>
</tr>
<tr>
<td>
<p><b>Destination</b></p>
</td>
<td>
<p>System-wide registry entry</p>
</td>
</tr>
</table>
<p> </p>
<h3><a id="comments"></a><a id="COMMENTS"></a>Comments</h3>
<p>This flag is permanently set in Windows Server 2003 and later versions of Windows. On these systems, the <b>Enable pool tagging</b> check box in the Global Flags dialog box is dimmed and commands to enable or disable pool tagging fail. </p>
<p>Use <b>ExAllocatePoolWithTag</b> or <b>ExAllocatePoolWithQuotaTag</b> to set the tag value. When no tag value is specified (<b>ExAllocatePool</b>, <b>ExAllocatePoolWithQuota</b>), Windows creates a tag with the default value of "None." Because data for all allocations with a "None" tag is combined, you cannot distinguish the data for a specific allocation. For information about these routines, see the Windows Driver Kit (WDK).</p>
<p>In Windows XP and earlier systems, this flag also directs Windows to attach a pool tag even when the pool memory is allocated by using <b>ExAllocatePoolWithQuotaTag</b>. Otherwise, the tag bytes are used to store the quota values. In Windows Server 2003, tag values and quota values are stored in separate fields that are attached to every pool memory allocation.</p>
<div class="alert"><b>Note</b>    To display the data that Windows collects about a tagged allocation, use PoolMon, a tool that is included in the Windows Driver Kit. <p class="note">The description of the <b>Enable Pool Tagging</b> flag in the Windows XP Support Tools documentation is incomplete. This flag directs Windows to collect and process data by tag value.</p>
</div>
<div> </div>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20Enable pool tagging%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
