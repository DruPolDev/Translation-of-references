<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="The !usbkd.usbhubext command displays information about a USB hub.."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>!usbkd.usbhubext</title>



<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger._usbkd_usbhubext"></a>!usbkd.usbhubext</h1>
</div>
<p>The  <b>!usbkd.usbhubext</b> command displays information about a USB hub..</p>
<pre class="syntax"><b>!usbkd.usbhubext </b><i>DeviceExtension</i></pre>
<h2><a id="ddk__devobj_dbg"></a><a id="DDK__DEVOBJ_DBG"></a>Parameters</h2>
<p></p>
<dl>
<dt><a id="_______DeviceExtension______"></a><a id="_______deviceextension______"></a><a id="_______DEVICEEXTENSION______"></a>       <i>DeviceExtension</i>      </dt>
<dd>
<p>Address of one of the following:</p>
<ul>
<li>The device extension for the functional device object (FDO) of a USB hub.</li>
<li>The device extension for the physical device object (PDO) of a device that is connected to a USB hub.</li>
</ul>
</dd>
</dl>
<h2><a id="DLL"></a><a id="dll"></a>DLL</h2>
<p>Usbkd.dll
     </p>
<h2>Examples</h2>
<p>Here is one way to find the address of the device extension for the FDO of USB hub. First enter <a href="_usbkd_usb2tree.htm"><b>!usbkd.usb2tree</b></a>.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usb2tree
...
2)!ehci_info ffffe00001ca11a0 !devobj ffffe00001ca1050 PCI: VendorId 8086 DeviceId 293c RevisionId 0002 
    RootHub !hub2_info ffffe000023201a0 !devstack ffffe00002320050</code></pre>
<p>In the preceding output, you can see the suggested command <b>!devstack ffffe00002320050</b>. Enter this command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !kdexts.devstack ffffe00002320050

  !DevObj           !DrvObj            !DevExt           ObjectName
&gt; ffffe00002320050  \Driver\usbhub     ffffe000023201a0  0000002d
  ffffe0000213c050  \Driver\usbehci    ffffe0000213c1a0  USBPDO-3
...</code></pre>
<p>In the preceding output, you can see that the address of the device extension for the FDO of the hub is <code>ffffe000023201a0</code>. </p>
<p>Now pass the address of the device extension to the <b>!usbkd.usbhubext</b> command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usbhubext ffffe000023201a0

FDO ffffe00002320050 PDO ffffe0000213c050 HubNumber# 3
dt USBHUB!_DEVICE_EXTENSION_HUB ffffe000023201a0
!usbhublog ffffe000023201a0
RemoveLock ffffe00002320668
FdoFlags ffffe00002320ba0

CurrentPowerIrp: System (0000000000000000) Device (0000000000000000)

ObjReferenceList: !usblist ffffe00002320b70, RL 
ExceptionList: !usblist ffffe00002321498, EL [Empty]
DmTimerListHead: !usblist ffffe00002321040, TL [Empty]
PdoRemovedListHead: !usblist ffffe00002321478, PL [Empty]
PdoPresentListHead: !usblist ffffe00002321468, PL 
WorkItemListHead: !usblist ffffe00002320c80, WI [Empty]
SshBusyListHead: !usblist ffffe00002320dc0, BL 


PnP FUNC HISTORY (latest at bottom)
----------------------------------------
01. IRP_MN_QUERY_DEVICE_RELATIONS
...
POWER FUNC HISTORY (latest at bottom)
--------------------------------------------------
01. IRP_MN_QUERY_POWER    - PowerSystemHibernate
...

HARD RESET STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. HRE_Pause                       HReset_WaitReady                        HReset_Paused                           
...

PNP STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. Ev_SYSTEM_POWER                 FDO_WaitPnpStop                         FDO_WaitPnpStop                         
...

POWER STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. Ev_SET_POWER_S0                 FdoSx_Dx                                FdoWaitS0IoComplete_Dx                  
...

BUS STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. BE_BusSuspend                   BS_BusPause                             BS_BusSuspend                           
...

SSH_EnabledStatus: [SSH_ENABLED_VIA_POWER_POLICY]

SSH STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. SSH_Event_ResumeHubComplete     SSH_State_HubPendingResume              SSH_State_HubActive                     
...

PORT DATA
-------------------------------------------------------------------------------------------------------------------
PortData 1: !port2_info ffffe000021bf000 Port State = PS_WAIT_CONNECT PortChangeLock: 0, Pcq_State: Pcq_Run_Idle             
     PDO 0000000000000000 
...</code></pre>
<p>Here is one way to find the address of the device extension for the PDO of a device that is connected to a USB hub. First enter <a href="_usbkd_usb2tree.htm"><b>!usbkd.usb2tree</b></a>.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usb2tree
...
2)!ehci_info ffffe00001ca11a0 !devobj ffffe00001ca1050 PCI: VendorId 8086 DeviceId 293c RevisionId 0002 
    RootHub !hub2_info ffffe000023201a0 !devstack ffffe00002320050
        Port 1: !port2_info ffffe000021bf000 
        Port 2: !port2_info ffffe000021bfb40 
        Port 3: !port2_info ffffe000021c0680 !devstack ffffe00007c882a0</code></pre>
<p>In the preceding output, you can see suggested command <b>!devstack ffffe00007c882a0</b>. Enter this command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !kdexts.devstack ffffe00007c882a0

  !DevObj           !DrvObj            !DevExt           ObjectName
  ffffe00006ce2260  \Driver\USBSTOR    ffffe00006ce23b0  00000070
&gt; ffffe00007c882a0  \Driver\usbhub     ffffe00007c883f0  USBPDO-4
...</code></pre>
<p>In the preceding output, you can see that the address of the device extension for the PDO of the device is <code>ffffe00007c883f0</code>.</p>
<p>Now pass the address of the device extension to the  <a href="_usbkd_usbhcdpnp.htm"><b>!usbhcdpnp</b></a> command.</p>
<pre class="syntax" xml:space="preserve"><code>0: kd&gt; !usbkd.usbhubext ffffe00007c883f0

dt USBHUB!_DEVICE_EXTENSION_PDO ffffe00007c883f0
PARENT HUB: FDO ffffe00002320050 !hub2_info ffffe000023201a0
!usbhubinfo ffffe00002320050
PORT NUMBER : 3
IoList: !usblist ffffe00007c888b0, IO 
LatchList: !usblist ffffe00007c888e0, LA 

PnP ID's
----------------------------------------------------------------------------------------------------
DeviceId:USB\VID_0781&amp;PID_5530  
HardwareId:USB\VID_0781&amp;PID_5530&amp;REV_0100USB\VID_0781&amp;PID_5530  
CompatibleId:USB\Class_08&amp;SubClass_06&amp;Prot_50USB\Class_08&amp;SubClass_06USB\Class_08  
SerialNumberId:20052444100A47F319CB  
UniqueId:3  
ProductId:Cruzer  

Pnp Func History (latest at bottom)
----------------------------------------
01. IRP_MN_QUERY_BUS_INFORMATION
...

Power Func History (latest at bottom)
----------------------------------------------------------------

PNP STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. (6)                            (0)                                    PDO_WaitPnpStart                        
02. Ev_PDO_IRP_MN_START             PDO_WaitPnpStart                        PDO_WaitPnpStop                         

POWER STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
    [EMPTY]

HARDWARE STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
01. PdoEv_CreatePdo                 (0)                                    Pdo_Created                             
02. PdoEv_RegisterPdo               Pdo_Created                             Pdo_HwPresent                           
03. PdoEv_QBR                       Pdo_HwPresent                           Pdo_PnpRefHwPresent                     

IDLE STATE HISTORY (latest at bottom)
----------------------------------------------------------------------------------------------------
    EVENT                           STATE                                   NEXT
----------------------------------------------------------------------------------------------------
    [EMPTY]</code></pre>
<h2><a id="see_also"></a>See also</h2>
<dl>
<dt><a href="usb_2_0_extensions.htm">USB 2.0 Debugger Extensions</a></dt>
<dt><a href="http://go.microsoft.com/fwlink/p?LinkID=227351">Universal Serial Bus (USB) Drivers</a></dt>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20!usbkd.usbhubext%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
