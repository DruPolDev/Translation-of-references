<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:mssdk="winsdk" xmlns:script="urn:script" xmlns:build="urn:build" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="Description" content="The AddExtensionCommand method adds a new FA entry to a DebugFailureAnalysis object and sets the data block of the FA entry to a specified debugger command."/>
<meta name="MSHAttr" content="PreferredSiteName:MSDN"/>
<meta name="MSHAttr" content="PreferredLib:/library/windows/hardware"/>
<title>IDebugFailureAnalysis2::AddString method</title>



<link rel="STYLESHEET" type="text/css" HREF="../common/backsdk4.css"/>


</head>
<body>

<div id="mainSection">
<div class="clsServerSDKContent">
<h1><a id="debugger.idebugfailureanalysis2_addextensioncommand"></a>IDebugFailureAnalysis2::AddString method</h1>
</div>
<p>The <b>AddExtensionCommand</b> method adds a new <a href="failure_analysis_entries.htm">FA entry</a> to a <a href="idebugfailureanalysis2.htm"><b>DebugFailureAnalysis</b></a> object and sets the data block of the FA entry to a specified debugger command.</p>
<h2>Syntax</h2>
<div class="code"><span codelanguage="ManagedCPlusPlus"><table>
<tr>
<th>C++</th>
</tr>
<tr>
<td>
<pre>HRESULT AddString(
       FA_TAG Tag,
  [in] PSTR   Str
);</pre>
</td>
</tr>
</table></span></div>
<h2>Parameters</h2>
<dl>
<dt><i>Tag</i> </dt>
<dd>
<p>A value in the <a href="fa_tag.htm"><b>FA_TAG</b></a> enumeration. The data type associated with this tag must be <b>DEBUG_FA_ENTRY_EXTENSION_CMD</b> or <b>DEBUG_FA_ENTRY_ANSI_STRING</b>.</p>
</dd>
<dt><i>Str</i> [in]</dt>
<dd>
<p>A pointer to a null-terminated ANSI string that is the debugger command. An example of debugger command is "!analyze -v".</p>
</dd>
</dl>
<h2>Return value</h2>
<p>If this method succeeds, it returns a returns a pointer to the new <a href="fa_entry.htm"><b>FA_ENTRY</b></a> structure. If this method fails, it returns <b>NULL</b>.
</p>
<h2>Remarks</h2>
<p>This method sets the <b>DataSize</b> member of the new <a href="fa_entry.htm"><b>FA_ENTRY</b></a> structure to the length, in bytes, of the extension command including the <b>NULL</b> terminator.</p>
<p>Each tag is associated with one of the data types in the <a href="fa_entry_type.htm"><b>FA_ENTRY_TYPE</b></a> enumeration. To determine the data type associated with a tag, call the <a href="idebugfaentrytags_gettype.htm"><b>GetType</b></a> method of the <a href="idebugfaentrytags.htm">IDebugFAEntryTags</a> interface.</p>
<p>To get a pointer to an <a href="idebugfaentrytags.htm">IDebugFAEntryTags</a> interface, call the <a href="idebugfailureanalysis2_getdebugfatagcontrol.htm"><b>GetDebugFATagControl</b></a> method of the <a href="idebugfailureanalysis2.htm"><b>IDebugFailureAnalysis2</b></a> interface.</p>
<p>[sperry] Note to Self: If the given tag has not already had its data type fixed, this method sets and fixes the data type for the tag. That would be the case if the DebugFailureAnalysis object does not yet have an FA entry with this tag. But if the DebugFailureAnalysis object already has an FA entry with this tag, then the data type of the tag is fixed. This method creates a new FA entry with the same tag. Now what if the data type that we're trying to write into the new data buffer does not match the data type that has been fixed for this tag. Then we see whether it's OK to cast from the fixed data type to the type we want to write.</p>
<p>It's OK to cast among ULONG64, POINTER, and InstructionOffset. It's OK to cast among String and ExtensionCommand. ULONG can only be ULONG. STRINGs can only be STRINGs.</p>
<p>Question: When does the data type of a tag get fixed? Is it when the first FA entry with that tag is created?</p>
<div class="code"><span codelanguage="ManagedCPlusPlus"><table>
<tr>
<th>C++</th>
</tr>
<tr>
<td>
<pre>typedef struct _FA_TAG_PROPS
{
    FA_TAG Tag;
    FA_ENTRY_TYPE Type;
    ULONG Fixed:1;
    ULONG NameAllocated:1;
    ULONG DescriptionAllocated:1;
    PCSTR Name;
    PCSTR Description;
    AnalysisPlugIn *Plugin;
} FA_TAG_PROPS, *PFA_TAG_PROPS;</pre>
</td>
</tr>
</table></span></div>
<h2>Requirements</h2>
<table>
<tr>
<th width="30%">
<p>Target platform</p>
</th>
<td width="70%">
<dl>
<dt></dt>
</dl>
</td>
</tr>
<tr>
<th width="30%">
<p>Header</p>
</th>
<td width="70%">
<dl>
<dt>Extsfns.h</dt>
</dl>
</td>
</tr>
</table>
<h2><a id="see_also"></a>See also</h2>
<dl>
<dt><a href="idebugfailureanalysis2.htm"><b>IDebugFailureAnalysis2</b></a></dt>
<dt><a href="idebugfaentrytags.htm">IDebugFAEntryTags</a></dt>
<dt><a href="writing_an_analysis_extension_to_extend__analyze.htm">Writing an Analysis Extension Plug-in to Extend !analyze</a></dt>
<dt><a href="idebugfailureanalysis2_setextensioncommand.htm"><b>SetExtensionCommand</b></a></dt>
<dt><a href="_efn_analyze.htm"><b>_EFN_Analyze</b></a></dt>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [debugger\debugger]:%20IDebugFailureAnalysis2::AddString method%20 RELEASE:%20(3/16/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
</div>
<p style="text-align:left;font-family:Arial,sanserif;font-size:100%;color:black">
&#x00a9;&#x00a0;2016 Microsoft. All rights reserved.</p>

</body>
</html>
